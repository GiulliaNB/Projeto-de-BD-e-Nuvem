CREATE TABLE TIPOS_MEMBROS (
	COD_TIPO_MEMBRO INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	DESCRICAO_TIPO VARCHAR(150) UNIQUE
);

CREATE TABLE SETORES(
	COD_SETOR INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	NOME_SETOR VARCHAR(150) NOT NULL UNIQUE
);

CREATE TABLE ESTADOS(
	COD_ESTADO INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	NOME_ESTADO VARCHAR(25) NOT NULL UNIQUE,
	UF VARCHAR(2) NOT NULL
);

CREATE TABLE CIDADES(
	COD_CIDADE  INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	COD_ESTADO INT NOT NULL,
	NOME_CIDADE VARCHAR(35) NOT NULL  ,
	FOREIGN KEY (COD_ESTADO) REFERENCES ESTADOS(COD_ESTADO)
);
   
CREATE TABLE MEMBROS ( 
  COD_IDENTIFICACAO BIGINT NOT NULL PRIMARY KEY, 
  COD_TIPO_MEMBRO INT NOT NULL,
  COD_SETOR INT NOT NULL,
  COD_ESTADO INT NOT NULL,
  COD_CIDADE INT NOT NULL,
  NOME_COMPLETO VARCHAR(255) NOT NULL,
  SENHA VARCHAR(30) NOT NULL,
  DATA_NASCIMENTO DATE NOT NULL DEFAULT GETDATE(),
  FOREIGN KEY (COD_TIPO_MEMBRO) REFERENCES TIPOS_MEMBROS(COD_TIPO_MEMBRO),
  FOREIGN KEY (COD_SETOR) REFERENCES SETORES(COD_SETOR),
  FOREIGN KEY (COD_ESTADO) REFERENCES ESTADOS(COD_ESTADO),
  FOREIGN KEY (COD_CIDADE) REFERENCES CIDADES(COD_CIDADE)
);

CREATE TABLE SINTOMAS(
	COD_SINTOMA INT NOT NULL PRIMARY KEY IDENTITY(1,1),
	DESCRICAO_SINTOMA VARCHAR(150) NOT NULL UNIQUE
);

CREATE TABLE [REGISTROS](
	[COD_REGISTRO] [bigint] not null PRIMARY KEY IDENTITY(1,1) NOT NULL,
	[ESTADO_SAUDE] [bit] NOT NULL,
	[DATA_CADASTRO] [date] NULL,
	[HORA_CADASTRO] [time](0) NULL,
	[COD_IDENTIFICACAO] [bigint] NULL,
	FOREIGN KEY([COD_IDENTIFICACAO]) REFERENCES [dbo].[MEMBROS] ([COD_IDENTIFICACAO]));

CREATE TABLE REGISTROS_SINTOMAS(
	COD_REGISTRO BIGINT,
	COD_SINTOMA INT
	FOREIGN KEY (COD_REGISTRO) REFERENCES REGISTROS(COD_REGISTRO),
	FOREIGN KEY (COD_SINTOMA) REFERENCES SINTOMAS(COD_SINTOMA),
	unique(COD_REGISTRO,COD_SINTOMA)
	); 